const __vite__fileDeps=["assets/slidev/shiki-vA4xqT7b.js","assets/monaco/bundled-types-BZMIkCVS.js","assets/modules/vue-DtecLCrU.js","assets/modules/file-saver-DY7lxZlc.js","assets/monaco/bundled-types-BLtM5Hub.css","assets/modules/shiki-CqIg3mkY.js","assets/modules/shiki-BSchMNmt.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{l as ae,_ as j,e as le,n as ue,o as ce,p as ee,j as N}from"../monaco/bundled-types-BZMIkCVS.js";import{d as W,t as A,E as de,o as l,b as d,a7 as pe,y as te,Q as fe,ac as ne,aF as me,aA as he,D as ge,aa as ve,an as _e,e as C,x as T,H as E,F as D,ad as K,c as J,i as ye,g as F,h as oe,l as L,k as se,aG as Ae,n as P,m as Q,q as be,s as Ce,a6 as I}from"../modules/vue-DtecLCrU.js";import{l as Z}from"../lz-string-BTt4z63d.js";import{_ as V,a as ie,$ as H,a5 as we,ag as X}from"../index-P-GsmQF8.js";import{u as U,p as xe,f as Se}from"./context-DcuMeIT5.js";import{G as Ee}from"../modules/unplugin-icons-DjSySoiW.js";import{I as Me}from"./IconButton-DxoR_OWK.js";import{I as Oe}from"./default-tz6ojGm8.js";import"../modules/file-saver-DY7lxZlc.js";import"../modules/shiki-CqIg3mkY.js";const ke=[],$e=ae(async()=>{const a={javascript:z,js:z,typescript:z,ts:z},{shiki:t,themes:n}=await j(()=>import("./shiki-vA4xqT7b.js"),__vite__mapDeps([0,1,2,3,4,5,6])),p=await t,f=(i,e,o={})=>p.codeToHtml(i,{lang:e,theme:typeof n=="string"?n:le.value?n.dark||"vitesse-dark":n.light||"vitesse-light",...o}),m=async i=>{if(!"./".includes(i[0])&&!/^(@[^\/:]+?\/)?[^\/:]+$/.test(i))return i;const e=await fetch(`/@slidev/resolve-id?specifier=${i}`);if(!e.ok)return null;const o=await e.text();return o?`/@fs${ue("/",ce(o))}`:null},u=async(i,e,o)=>{try{const r=a[e];if(!r)throw new Error(`Runner for language "${e}" not found`);return await r(i,{options:o,highlight:f,resolveId:m,run:async(s,h)=>await u(s,h,o)})}catch(r){return console.error(r),{error:`${r}`}}};for(const i of ke){const e=await i(a);Object.assign(a,e)}return{highlight:f,run:u}});async function Be(a){const t=[],n={},p=function(...e){t.push(e.map(m))};n.info=n.log=n.debug=n.warn=n.error=p,n.clear=()=>t.length=0;const f=Object.assign({},console,n);try{const e=`return async (console) => {
      window.console = console
      ${i(a)}
    }`;await new Function(e)()(f)}catch(e){return{error:`ERROR: ${e}`}}function m(e){return typeof e=="string"?{text:e}:{text:u(e),highlightLang:"javascript"}}function u(e){var r;let o="";if(e instanceof Error)o=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")o=String(e);else if(Array.isArray(e))o=`[${e.map(u).join(", ")}]`;else if(e instanceof Set){const s=[...e];o=`Set (${e.size}) {${s.map(u).join(", ")}}`}else if(e instanceof Map){const s=[...e.entries()];o=`Map (${e.size}) {${s.map(([h,g])=>`${u(h)} => ${u(g)}`).join(", ")}}`}else if(e instanceof RegExp)o=e.toString();else if(typeof e=="string")o=JSON.stringify(e);else if(typeof e=="object"){const s=((r=e.constructor)==null?void 0:r.name)??"",h=s&&s==="Object"?"":s;o=(h?`${h}: `:"")+JSON.stringify(e,(w,b)=>b===void 0?"__undefined__":b,2).replace(/"__undefined__"/g,"undefined"),o=String(o)}else o=String(e);return o}function i(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let R;async function z(a,t){R??(R=await j(()=>import("../monaco/bundled-types-BZMIkCVS.js").then(f=>f.t),__vite__mapDeps([1,2,3,4]))),a=R.transpileModule(a,{compilerOptions:{module:R.ModuleKind.ESNext,target:R.ScriptTarget.ES2022},transformers:{after:[De]}}).outputText;const n=/import\s*\(\s*(['"])(.+?)['"]\s*\)/g,p={};for(const[,,f]of a.matchAll(n))p[f]=await t.resolveId(f)??f;return a=a.replace(n,(f,m,u)=>`import(${m}${p[u]??u}${m})`),await Be(a)}function De(a){const{factory:t}=a,{isImportDeclaration:n,isNamedImports:p,NodeFlags:f}=R;return m=>{var i,e;const u=[...m.statements];for(let o=0;o<u.length;o++){const r=u[o];if(!n(r))continue;let s;const h=(i=r.importClause)==null?void 0:i.namedBindings,g=[];if((e=r.importClause)!=null&&e.name&&g.push(t.createBindingElement(void 0,t.createIdentifier("default"),r.importClause.name)),h)if(p(h)){for(const b of h.elements)g.push(t.createBindingElement(void 0,b.propertyName,b.name));s=t.createObjectBindingPattern(g)}else s=t.createIdentifier(h.name.text);else s=t.createObjectBindingPattern(g);const w=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(s,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[r.moduleSpecifier])))],f.Const));u[o]=w}return t.updateSourceFile(m,u)}}const Re=W({__name:"DomElement",props:{element:{type:null,required:!0}},setup(a){const t=a,n=A();return de(()=>{n.value&&n.value.appendChild(t.element)}),(p,f)=>(l(),d("div",{ref_key:"container",ref:n},null,512))}}),ze=V(Re,[["__file","/Users/antoine/Documents/slide-dev-test/slidev/node_modules/@slidev/client/internals/DomElement.vue"]]),je={key:0,class:"text-sm text-center opacity-50"},Le={key:1,class:"text-sm text-center opacity-50"},Ie={key:2,class:"text-sm text-center opacity-50"},Ve=["innerHTML"],qe={key:1,class:"text-red-500"},Ne={key:3,class:"output-line"},Te=["innerHTML"],Pe={key:2,class:"separator"},Fe={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},He=W({__name:"CodeRunner",props:{modelValue:{type:String,required:!0},lang:{type:String,required:!0},autorun:{type:[Boolean,String],required:!0},height:{type:String,required:!1},showOutputAt:{type:null,required:!1},highlightOutput:{type:Boolean,required:!0},runnerOptions:{type:Object,required:!1}},emits:["update:modelValue"],setup(a,{emit:t}){const n=a,p=t,{isPrintMode:f}=ie(),m=pe(n,"modelValue",p),{$renderContext:u,$clicksContext:i}=U(),e=te(()=>!["slide","presenter"].includes(u.value)),o=f.value?"once":n.autorun,r=A(o),s=fe(),h=A(0),g=A(),w=A(n.showOutputAt);if(n.showOutputAt){const M=H();ne(()=>{const $=we(n.showOutputAt),_=i.calculate($);_?(i.register(M,_),me(()=>{w.value=!_.isActive.value})):w.value=!1}),he(()=>i.unregister(M))}const b=ee(200,async()=>{if(e.value)return;const{highlight:M,run:$}=await $e();g.value=M;const _=setTimeout(()=>{r.value=!0},500);s.value=N(await $(m.value,n.lang,n.runnerOptions??{})),h.value+=1,r.value=!1,clearTimeout(_)});return o==="once"?b():o&&ge(m,b,{immediate:!0}),(M,$)=>{var x;const _=Ee;return l(),d(D,null,[ve(C("div",{class:"relative flex flex-col rounded-b border-t border-main",style:oe({height:n.height}),"data-waitfor":".slidev-runner-output"},[e.value?(l(),d("div",je,' Code is disabled in the "'+T(E(u))+'" mode ',1)):r.value?(l(),d("div",Le," Running... ")):(x=s.value)!=null&&x.length?(l(),d("div",{key:`run-${h.value}`,class:"slidev-runner-output"},[(l(!0),d(D,null,K(s.value,(c,O)=>(l(),d(D,{key:O},["html"in c?(l(),d("div",{key:0,innerHTML:c.html},null,8,Ve)):"error"in c?(l(),d("div",qe,T(c.error),1)):"element"in c?(l(),J(ze,{key:2,element:c.element},null,8,["element"])):(l(),d("div",Ne,[(l(!0),d(D,null,K(E(N)(c),(S,y)=>(l(),d(D,{key:y},[S.highlightLang&&g.value?(l(),d("span",{key:0,class:"highlighted",innerHTML:g.value(S.text,S.highlightLang)},null,8,Te)):(l(),d("span",{key:1,class:ye(S.class)},T(S.text),3)),y<E(N)(c).length-1?(l(),d("span",Pe,",")):F("v-if",!0)],64))),128))]))],64))),128))])):(l(),d("div",Ie," Click the play button to run the code "))],4),[[_e,!w.value]]),E(m).trim()?(l(),d("div",Fe,[L(Me,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:E(b)},{default:se(()=>[L(_)]),_:1},8,["onClick"])])):F("v-if",!0)],64)}}}),We=V(He,[["__file","/Users/antoine/Documents/slide-dev-test/slidev/node_modules/@slidev/client/internals/CodeRunner.vue"]]),Je={class:"relative slidev-monaco-container"},Ue=W({__name:"Monaco",props:{codeLz:{type:String,required:!0,default:""},diffLz:{type:String,required:!1},lang:{type:String,required:!1,default:"typescript"},readonly:{type:Boolean,required:!1,default:!1},lineNumbers:{type:String,required:!1,default:"off"},height:{type:[Number,String],required:!1,default:"initial"},editorOptions:{type:null,required:!1},ata:{type:Boolean,required:!1,default:!0},runnable:{type:Boolean,required:!1,default:!1},autorun:{type:[Boolean,String],required:!1,default:!0},showOutputAt:{type:null,required:!1},outputHeight:{type:String,required:!1},highlightOutput:{type:Boolean,required:!1,default:!0},runnerOptions:{type:Object,required:!1}},setup(a){const t=a,n=A(Z.decompressFromBase64(t.codeLz).trimEnd()),p=t.diffLz&&A(Z.decompressFromBase64(t.diffLz).trimEnd()),m={ts:"typescript",js:"javascript"}[t.lang]??t.lang,i={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[t.lang]??t.lang,e=A(),o=A(),r=A(0),s=A(),h=te(()=>t.height==="auto"?`${r.value}px`:t.height==="initial"?`${s.value}px`:t.height),g=A(),{$page:w,$renderContext:b}=U(),{currentSlideNo:M}=ie(),$=Ae(()=>Math.abs(w.value-M.value)<=1&&g.value,_=>{["slide","presenter"].includes(b.value)?_():setTimeout(_,5e3)});return ne(async()=>{const{default:_}=await j(()=>import("../monaco/bundled-types-BZMIkCVS.js").then(v=>v.v),__vite__mapDeps([1,2,3,4])),{ata:x,monaco:c}=await _(),O=c.editor.createModel(n.value,m,c.Uri.parse(`file:///${H()}.${i}`));O.onDidChangeContent(()=>n.value=O.getValue());const S={automaticLayout:!0,readOnly:t.readonly,lineNumbers:t.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,...t.editorOptions};let y;if(p){const v=c.editor.createModel(p.value,m,c.Uri.parse(`file:///${H()}.${i}`));v.onDidChangeContent(()=>n.value=O.getValue());const k=c.editor.createDiffEditor(o.value,{renderOverviewRuler:!1,...S});k.setModel({original:O,modified:v});const B=k.getOriginalEditor(),q=k.getModifiedEditor(),G=()=>{const Y=Math.max(B.getContentHeight(),q.getContentHeight())+4;s.value??(s.value=Y),r.value=Y,P(()=>k.layout())};B.onDidContentSizeChange(G),q.onDidContentSizeChange(G),y=q}else{const v=c.editor.create(o.value,{model:O,lineDecorationsWidth:0,...S});v.onDidContentSizeChange(k=>{const B=k.contentHeight+4;s.value??(s.value=B),r.value=B,P(()=>y.layout())}),y=v}g.value=()=>{$(),j(()=>import("../monaco/bundled-types-BZMIkCVS.js").then(v=>v.w),__vite__mapDeps([1,2,3,4])),t.ata&&(x(y.getValue()),y.onDidChangeModelContent(ee(1e3,()=>{x(y.getValue())})))};const re=y.layoutContentWidget.bind(y);y.layoutContentWidget=v=>{re(v),v.getId()==="editor.contrib.resizableContentHoverWidget"&&(v._resizableNode.domNode.style.transform=v._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},P(()=>c.editor.remeasureFonts())}),(_,x)=>(l(),d("div",Je,[C("div",{ref_key:"outer",ref:e,class:"relative slidev-monaco-container-inner",style:oe({height:h.value})},[C("div",{ref_key:"container",ref:o,class:"absolute inset-0.5"},null,512)],4),t.runnable?(l(),J(We,{key:0,modelValue:n.value,"onUpdate:modelValue":x[0]||(x[0]=c=>n.value=c),lang:E(m),autorun:t.autorun,"show-output-at":t.showOutputAt,height:t.outputHeight,"highlight-output":t.highlightOutput,"runner-options":t.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):F("v-if",!0)]))}}),Ge=V(Ue,[["__file","/Users/antoine/Documents/slide-dev-test/slidev/node_modules/@slidev/client/builtin/Monaco.vue"]]),Ye=C("h1",null,"Monaco Editor",-1),Ke=C("p",null,"Slidev provides built-in Monaco Editor support.",-1),Qe=C("p",null,[I("Add "),C("code",null,"{monaco}"),I(" to the code block to turn it into an editor:")],-1),Ze=C("p",null,[I("Use "),C("code",null,"{monaco-run}"),I(" to create an editor that can execute the code directly in the slide:")],-1),Xe={__name:"15",setup(a){return xe(X),U(),(t,n)=>{const p=Ge;return l(),J(Oe,be(Ce(E(Se)(E(X),14))),{default:se(()=>[Ye,Ke,Qe,L(p,Q({"code-lz":"JYWwDg9gTgLgBAbzlApgMzgXzmqERwDkAbgK4qEBQoksicK4MAngIJRQCGzWOeBhAHQB6FAA8YKKADtOAGyqUAxhGkBneJw5wAvMnQAKRmBbsuzAwEYADAEpblIA",lang:"ts"},{}),null,16),Ze,L(p,Q({runnable:"","code-lz":"JYWwDg9gTgLgBAbzgNwKZQM7AgOzgXzgDMoIQ4ByZAV1QoChRJZE5VwYBPAQSigENOAGjgZBACVQAbKRALFS5CgDoA9KgAeMdDn5SG9MZ0kyIACgCU9AMa4MEKamWyA5mYAGNVHAAkCNJjYOPjuVrY49o7OEG7sYFy8ApwAPDjUIABG6AB8ZgCMAAwWylCoACbU1qhmRMAZcAC82XAA2srttRkincr8MGYAtHkWAIRwANTEdb39AwBMowC6Ii15InmLFlZAA",lang:"ts"},{}),null,16)]),_:1},16)}}},ct=V(Xe,[["__file","/@slidev/slides/15.md"]]);export{ct as default};
